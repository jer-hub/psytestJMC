{% load static %}
<div class="row mb-5">
  <div class="col-sm-3 col-xs-6 align-self-center">
    <div class="m-3">
      <small class="text-muted p-0 m-0">total of: {{pm_count|default:0}}</small>
    </div>
    <ul class="list-group">
      <li class="list-group-item">
        <span class="bg-color-a p-2">Exceptional</span> =
        {{iq_exceptional|default:0 }}
      </li>
      <li class="list-group-item">
        <span class="bg-color-b p-2">Excellent</span> = {{iq_excellent|default:0}}
      </li>
      <li class="list-group-item">
        <span class="bg-color-c p-2">Very Good</span> = {{iq_verygood|default:0}}
      </li>
      <li class="list-group-item">
        <span class="bg-color-d p-2">Good</span> = {{iq_good|default:0 }}
      </li>
      <li class="list-group-item">
        <span class="bg-color-e p-2">Poor</span> = {{iq_poor|default:0 }}
      </li>
    </ul>
  </div>
  <div class="col-sm-9 col-xs-6 py-3">
    <div class="chart-container mx-auto" style="height: 400px; width: 100%">
      <canvas id="iqChart"></canvas>
    </div>
  </div>
</div>

{% block iq_scripts %}
<script>
  $(document).ready(() => {
    var $data = [{% for avg in iq_avg %}'{{avg}}',{% endfor %}];
    var $labels = [{% for label in iq_labels %}'{{label}}',{% endfor %}];

    let IQChart = new Chart(iqChart, {
      type: "line", // bar, horizontalBar, pie, line, doughnut, radar, polarArea
      data: {
        labels: $labels,
        datasets: [
          {
            data: $data,
            backgroundColor: [
              "rgba(66, 141, 239, 0.6)",
              "rgba(54, 162, 235, 0.6)",
              "rgba(255, 206, 86, 0.6)",
              "rgba(75, 192, 192, 0.6)",
              "rgba(153, 102, 255, 0.6)",
              "rgba(255, 159, 64, 0.6)",
              "rgba(255, 99, 132, 0.6)",
            ],
            borderWidth: 1,
            borderColor: "#777",
            hoverBorderWidth: 3,
            hoverBorderColor: "#000",
          },
        ],
      },
      options: {
        maintainAspectRatio: false,
        responsive: true,
        legend: {
          display: false,
        },
        tooltips: {
          enabled: true,
        },
        scales: {
          yAxes: [
            {
              ticks: {
                beginAtZero: true,
              },
            },
          ],
        },
      },
    });
  });
</script>
{% endblock %}
